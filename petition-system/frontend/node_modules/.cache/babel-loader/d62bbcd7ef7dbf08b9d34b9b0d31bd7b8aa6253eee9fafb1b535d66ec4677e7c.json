{"ast":null,"code":"import axios from'axios';const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';export const api=axios.create({baseURL:API_BASE_URL});api.interceptors.request.use(config=>{const token=localStorage.getItem('auth_token');if(token)config.headers.Authorization=`Bearer ${token}`;return config;});export function saveToken(token){localStorage.setItem('auth_token',token);}export function clearToken(){localStorage.removeItem('auth_token');}export async function login(role,code){const{data}=await api.post('/auth/login',{role,code});saveToken(data.token);return data;}export async function logout(){await api.post('/auth/logout');clearToken();}export async function submitPetition(payload){const{data}=await api.post('/petitions',payload);return data;}export async function trackPetition(petitionId){const{data}=await api.get(`/petitions/track/${petitionId}`);return data;}export async function listPetitions(params){const{data}=await api.get('/petitions',{params});return data;}export async function getPetition(id){const{data}=await api.get(`/petitions/${id}`);return data;}export async function updateStatus(id,status){const{data}=await api.put(`/petitions/${id}/status`,{status});return data;}export async function addResponse(id,payload){const{data}=await api.post(`/petitions/${id}/response`,payload);return data;}export async function analytics(){const{data}=await api.get('/admin/analytics');return data;}export async function deletePetition(id){const{data}=await api.delete(`/admin/petitions/${id}`);return data;}","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","saveToken","setItem","clearToken","removeItem","login","role","code","data","post","logout","submitPetition","payload","trackPetition","petitionId","get","listPetitions","params","getPetition","id","updateStatus","status","put","addResponse","analytics","deletePetition","delete"],"sources":["/workspace/petition-system/frontend/src/utils/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\nexport const api = axios.create({\n  baseURL: API_BASE_URL,\n});\n\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('auth_token');\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\nexport function saveToken(token) {\n  localStorage.setItem('auth_token', token);\n}\n\nexport function clearToken() {\n  localStorage.removeItem('auth_token');\n}\n\nexport async function login(role, code) {\n  const { data } = await api.post('/auth/login', { role, code });\n  saveToken(data.token);\n  return data;\n}\n\nexport async function logout() {\n  await api.post('/auth/logout');\n  clearToken();\n}\n\nexport async function submitPetition(payload) {\n  const { data } = await api.post('/petitions', payload);\n  return data;\n}\n\nexport async function trackPetition(petitionId) {\n  const { data } = await api.get(`/petitions/track/${petitionId}`);\n  return data;\n}\n\nexport async function listPetitions(params) {\n  const { data } = await api.get('/petitions', { params });\n  return data;\n}\n\nexport async function getPetition(id) {\n  const { data } = await api.get(`/petitions/${id}`);\n  return data;\n}\n\nexport async function updateStatus(id, status) {\n  const { data } = await api.put(`/petitions/${id}/status`, { status });\n  return data;\n}\n\nexport async function addResponse(id, payload) {\n  const { data } = await api.post(`/petitions/${id}/response`, payload);\n  return data;\n}\n\nexport async function analytics() {\n  const { data } = await api.get('/admin/analytics');\n  return data;\n}\n\nexport async function deletePetition(id) {\n  const { data } = await api.delete(`/admin/petitions/${id}`);\n  return data;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}