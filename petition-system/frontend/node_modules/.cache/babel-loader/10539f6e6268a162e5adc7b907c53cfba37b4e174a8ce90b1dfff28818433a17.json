{"ast":null,"code":"import React,{useState}from'react';import{trackPetition}from'../utils/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const statusColors={pending:'bg-yellow-400',in_progress:'bg-blue-500',resolved:'bg-green-500',rejected:'bg-red-500'};export default function TrackPetition(){const[petitionId,setPetitionId]=useState('');const[data,setData]=useState(null);const[error,setError]=useState('');const[loading,setLoading]=useState(false);const onSearch=async e=>{e.preventDefault();setError('');setLoading(true);try{const res=await trackPetition(petitionId.trim());setData(res);}catch(err){var _err$response,_err$response$data;setData(null);setError((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Not found');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold mb-4\",children:\"Track Petition\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSearch,className:\"flex gap-2 mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{value:petitionId,onChange:e=>setPetitionId(e.target.value),className:\"flex-1 border rounded p-2\",placeholder:\"Enter Petition ID (e.g., TNK-2025-001)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 bg-gray-900 text-white rounded\",children:\"Search\"})]}),loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-600 text-sm\",children:error}),data&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded shadow p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Petition ID\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-mono text-lg\",children:data.petition.petition_id})]}),/*#__PURE__*/_jsx(\"span\",{className:`inline-block px-3 py-1 text-white rounded ${statusColors[data.petition.status]}`,children:data.petition.status.replace('_',' ')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Department\"}),/*#__PURE__*/_jsx(\"div\",{children:data.petition.to_department})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Submitted By\"}),/*#__PURE__*/_jsx(\"div\",{children:data.petition.from_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Petition\"}),/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-pre-wrap\",children:data.petition.petition_text})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2\",children:\"Responses\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[data.responses.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-sm\",children:\"No responses yet.\"}),data.responses.map(r=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[new Date(r.response_date).toLocaleString(),\" \\u2022 \",r.responded_by]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 whitespace-pre-wrap\",children:r.response_text})]},r.id))]})]})]})]});}","map":{"version":3,"names":["React","useState","trackPetition","jsx","_jsx","jsxs","_jsxs","statusColors","pending","in_progress","resolved","rejected","TrackPetition","petitionId","setPetitionId","data","setData","error","setError","loading","setLoading","onSearch","e","preventDefault","res","trim","err","_err$response","_err$response$data","response","message","className","children","onSubmit","value","onChange","target","placeholder","petition","petition_id","status","replace","to_department","from_name","petition_text","responses","length","map","r","Date","response_date","toLocaleString","responded_by","response_text","id"],"sources":["/workspace/petition-system/frontend/src/pages/TrackPetition.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { trackPetition } from '../utils/api';\n\nconst statusColors = {\n  pending: 'bg-yellow-400',\n  in_progress: 'bg-blue-500',\n  resolved: 'bg-green-500',\n  rejected: 'bg-red-500',\n};\n\nexport default function TrackPetition() {\n  const [petitionId, setPetitionId] = useState('');\n  const [data, setData] = useState(null);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const onSearch = async (e) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n    try {\n      const res = await trackPetition(petitionId.trim());\n      setData(res);\n    } catch (err) {\n      setData(null);\n      setError(err?.response?.data?.message || 'Not found');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-3xl mx-auto p-6\">\n      <h1 className=\"text-2xl font-semibold mb-4\">Track Petition</h1>\n      <form onSubmit={onSearch} className=\"flex gap-2 mb-4\">\n        <input value={petitionId} onChange={(e) => setPetitionId(e.target.value)} className=\"flex-1 border rounded p-2\" placeholder=\"Enter Petition ID (e.g., TNK-2025-001)\" />\n        <button className=\"px-4 py-2 bg-gray-900 text-white rounded\">Search</button>\n      </form>\n      {loading && <div>Loading...</div>}\n      {error && <div className=\"text-red-600 text-sm\">{error}</div>}\n      {data && (\n        <div className=\"bg-white rounded shadow p-4\">\n          <div className=\"flex justify-between items-center\">\n            <div>\n              <div className=\"text-sm text-gray-500\">Petition ID</div>\n              <div className=\"font-mono text-lg\">{data.petition.petition_id}</div>\n            </div>\n            <span className={`inline-block px-3 py-1 text-white rounded ${statusColors[data.petition.status]}`}>{data.petition.status.replace('_',' ')}</span>\n          </div>\n          <div className=\"mt-4\">\n            <div className=\"text-sm text-gray-500\">Department</div>\n            <div>{data.petition.to_department}</div>\n          </div>\n          <div className=\"mt-4\">\n            <div className=\"text-sm text-gray-500\">Submitted By</div>\n            <div>{data.petition.from_name}</div>\n          </div>\n          <div className=\"mt-4\">\n            <div className=\"text-sm text-gray-500\">Petition</div>\n            <div className=\"whitespace-pre-wrap\">{data.petition.petition_text}</div>\n          </div>\n\n          <div className=\"mt-6\">\n            <h3 className=\"font-semibold mb-2\">Responses</h3>\n            <div className=\"space-y-3\">\n              {data.responses.length === 0 && <div className=\"text-gray-500 text-sm\">No responses yet.</div>}\n              {data.responses.map((r) => (\n                <div key={r.id} className=\"border rounded p-3\">\n                  <div className=\"text-xs text-gray-500\">{new Date(r.response_date).toLocaleString()} â€¢ {r.responded_by}</div>\n                  <div className=\"mt-1 whitespace-pre-wrap\">{r.response_text}</div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}