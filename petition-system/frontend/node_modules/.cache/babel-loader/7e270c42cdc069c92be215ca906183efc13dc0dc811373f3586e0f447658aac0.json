{"ast":null,"code":"import React,{useState}from'react';import{submitPetition}from'../utils/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const departments=['Revenue','Police','Health','Education','PWD'];export default function SubmitPetition(){const[form,setForm]=useState({from_name:'',to_department:departments[0],whatsapp_number:'',petition_text:'',priority:'normal'});const[submitted,setSubmitted]=useState(null);const[error,setError]=useState('');const update=k=>e=>setForm(f=>({...f,[k]:e.target.value}));const onSubmit=async e=>{e.preventDefault();setError('');try{const res=await submitPetition(form);setSubmitted(res);}catch(err){var _err$response,_err$response$data;setError((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Submission failed');}};if(submitted){return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-lg mx-auto p-6 bg-white shadow rounded\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-2\",children:\"Petition Submitted\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700\",children:\"Your unique Petition ID is:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-mono mt-2\",children:submitted.petition_id}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-3\",children:\"Use this ID to track your petition status.\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-2xl mx-auto p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold mb-4\",children:\"Submit a Petition\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,className:\"space-y-4 bg-white p-4 rounded shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Your Name\"}),/*#__PURE__*/_jsx(\"input\",{value:form.from_name,onChange:update('from_name'),className:\"w-full border rounded p-2\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Department\"}),/*#__PURE__*/_jsx(\"select\",{value:form.to_department,onChange:update('to_department'),className:\"w-full border rounded p-2\",children:departments.map(d=>/*#__PURE__*/_jsx(\"option\",{value:d,children:d},d))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"WhatsApp Number\"}),/*#__PURE__*/_jsx(\"input\",{value:form.whatsapp_number,onChange:update('whatsapp_number'),className:\"w-full border rounded p-2\",placeholder:\"e.g., 9876543210\",required:true}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"10-15 digits\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Petition Text\"}),/*#__PURE__*/_jsx(\"textarea\",{value:form.petition_text,onChange:update('petition_text'),className:\"w-full border rounded p-2\",rows:6,maxLength:2000,required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:[form.petition_text.length,\"/2000\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Priority\"}),/*#__PURE__*/_jsxs(\"select\",{value:form.priority,onChange:update('priority'),className:\"w-full border rounded p-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"low\",children:\"Low\"}),/*#__PURE__*/_jsx(\"option\",{value:\"normal\",children:\"Normal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"high\",children:\"High\"}),/*#__PURE__*/_jsx(\"option\",{value:\"urgent\",children:\"Urgent\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-600 text-sm\",children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 bg-blue-600 text-white rounded\",children:\"Submit\"})]})]});}","map":{"version":3,"names":["React","useState","submitPetition","jsx","_jsx","jsxs","_jsxs","departments","SubmitPetition","form","setForm","from_name","to_department","whatsapp_number","petition_text","priority","submitted","setSubmitted","error","setError","update","k","e","f","target","value","onSubmit","preventDefault","res","err","_err$response","_err$response$data","response","data","message","className","children","petition_id","onChange","required","map","d","placeholder","rows","maxLength","length"],"sources":["/workspace/petition-system/frontend/src/pages/SubmitPetition.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { submitPetition } from '../utils/api';\n\nconst departments = ['Revenue', 'Police', 'Health', 'Education', 'PWD'];\n\nexport default function SubmitPetition() {\n  const [form, setForm] = useState({\n    from_name: '',\n    to_department: departments[0],\n    whatsapp_number: '',\n    petition_text: '',\n    priority: 'normal',\n  });\n  const [submitted, setSubmitted] = useState(null);\n  const [error, setError] = useState('');\n\n  const update = (k) => (e) => setForm((f) => ({ ...f, [k]: e.target.value }));\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    try {\n      const res = await submitPetition(form);\n      setSubmitted(res);\n    } catch (err) {\n      setError(err?.response?.data?.message || 'Submission failed');\n    }\n  };\n\n  if (submitted) {\n    return (\n      <div className=\"max-w-lg mx-auto p-6 bg-white shadow rounded\">\n        <h2 className=\"text-xl font-semibold mb-2\">Petition Submitted</h2>\n        <p className=\"text-gray-700\">Your unique Petition ID is:</p>\n        <div className=\"text-2xl font-mono mt-2\">{submitted.petition_id}</div>\n        <p className=\"text-gray-600 mt-3\">Use this ID to track your petition status.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-2xl mx-auto p-6\">\n      <h1 className=\"text-2xl font-semibold mb-4\">Submit a Petition</h1>\n      <form onSubmit={onSubmit} className=\"space-y-4 bg-white p-4 rounded shadow\">\n        <div>\n          <label className=\"block text-sm font-medium mb-1\">Your Name</label>\n          <input value={form.from_name} onChange={update('from_name')} className=\"w-full border rounded p-2\" required />\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium mb-1\">Department</label>\n          <select value={form.to_department} onChange={update('to_department')} className=\"w-full border rounded p-2\">\n            {departments.map((d) => <option key={d} value={d}>{d}</option>)}\n          </select>\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium mb-1\">WhatsApp Number</label>\n          <input value={form.whatsapp_number} onChange={update('whatsapp_number')} className=\"w-full border rounded p-2\" placeholder=\"e.g., 9876543210\" required />\n          <p className=\"text-xs text-gray-500 mt-1\">10-15 digits</p>\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium mb-1\">Petition Text</label>\n          <textarea value={form.petition_text} onChange={update('petition_text')} className=\"w-full border rounded p-2\" rows={6} maxLength={2000} required />\n          <div className=\"text-xs text-gray-500 mt-1\">{form.petition_text.length}/2000</div>\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium mb-1\">Priority</label>\n          <select value={form.priority} onChange={update('priority')} className=\"w-full border rounded p-2\">\n            <option value=\"low\">Low</option>\n            <option value=\"normal\">Normal</option>\n            <option value=\"high\">High</option>\n            <option value=\"urgent\">Urgent</option>\n          </select>\n        </div>\n        {error && <div className=\"text-red-600 text-sm\">{error}</div>}\n        <button className=\"px-4 py-2 bg-blue-600 text-white rounded\">Submit</button>\n      </form>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}